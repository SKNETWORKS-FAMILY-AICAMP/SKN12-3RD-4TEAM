# âš½ Ballzzi - RAGêµ¬ì¡°ì˜ QAì±—ë´‡ 
  - ì¶•êµ¬ì„ ìˆ˜ ë¶„ì„ ë° & íšŒì‚¬ ë‚´ë¶€ì •ë³´ ê¸°ë°˜ LLMì‹œìŠ¤í…œ
   ```
    8400ëª…ì˜ ì¶•êµ¬ì„ ìˆ˜ ë°ì´í„° - ì„ ìˆ˜ì´ë¯¸ì§€ë¥¼ í¬í•¨í•œ ì„¸ë¶€ë°ì´í„° ê²€ìƒ‰ ë° ë¶„ì„ê¸°ëŠ¥
    8ê°œì±•í„°ì˜ ëª¨ë“  ì‚¬ë‚´ê·œì • - ì¶œì¥ë¹„ ë° íœ´ê°€ê·œì • ì¡°íšŒ ë° ì„¤ëª…ê¸°ëŠ¥
    ë³€ë™ëœ ëª¨ë“  ì¸ì‚¬ì •ë³´ - ì‹¤ì‹œê°„ ì¸ì‚¬ì •ë³´ ë° ì¡°ì§ë„ ì—…ë°ì´íŠ¸ ì¡°íšŒê¸°ëŠ¥
    ë©”ì„¸ì§€ ì…ë ¥ì¹¸ ë³€ê²½ì—†ì´ ëª¨ë“  ì •ë³´ë¥¼ í•˜ë‚˜ì˜ ë©”ì„¸ì§€ì°½ì—ì„œ ì¡°íšŒê°€ëŠ¥ 
  ```
## ğŸ‘¥ íŒ€ ì†Œê°œ

<table>
  <tr>
    <td align="center">
      <img src="./img/ìŠ¤í¬ë¦°ìƒ· 2025-06-05 095502.png" width="120px"><br/>
      <b>ê¹€ë„ìœ¤</b>
    </td>
    <td align="center">
      <img src="./img/ìŠ¤í¬ë¦°ìƒ· 2025-06-05 095123.png" width="120px"><br/>
      <b>ìµœìš”ì„­</b>
    </td>
    <td align="center">
      <img src="./img/ìŠ¤í¬ë¦°ìƒ· 2025-06-05 095207.png" width="120px"><br/>
      <b>ê¹€ì¬í˜„</b>
    </td>
    <td align="center">
      <img src="./img/ìŠ¤í¬ë¦°ìƒ· 2025-06-05 095306.png" width="120px"><br/>
      <b>ì´ì„ì›</b>
    </td>
    <td align="center">
      <img src="./img/ìŠ¤í¬ë¦°ìƒ· 2025-06-05 095415.png" width="120px"><br/>
      <b>ìœ¤ê¶Œ</b>
    </td>
  </tr>
</table>

---

<div align="center"><h1>ğŸ“š STACKS</h1></div>

<div align="center"> 

![Python](https://img.shields.io/badge/Python-3776AB?style=for-the-badge&logo=python&logoColor=white)
![SQLite](https://img.shields.io/badge/SQLite-07405E?style=for-the-badge&logo=sqlite&logoColor=white)
![FAISS](https://img.shields.io/badge/FAISS-4285F4?style=for-the-badge&logo=meta&logoColor=white)
![OpenAI](https://img.shields.io/badge/OpenAI-412991?style=for-the-badge&logo=openai&logoColor=white)

![Streamlit](https://img.shields.io/badge/Streamlit-FF4B4B?style=for-the-badge&logo=streamlit&logoColor=white)
![LangChain](https://img.shields.io/badge/LangChain-1C3C3C?style=for-the-badge&logo=langchain&logoColor=white)
![HuggingFace](https://img.shields.io/badge/ğŸ¤—_Hugging_Face-FFD21E?style=for-the-badge&logoColor=black)
![Selenium](https://img.shields.io/badge/Selenium-43B02A?style=for-the-badge&logo=selenium&logoColor=white)

![KURE](https://img.shields.io/badge/KURE--v1-FF6B6B?style=for-the-badge&logo=huggingface&logoColor=white)
![BGE Reranker](https://img.shields.io/badge/BGE_Reranker--v2--m3-4ECDC4?style=for-the-badge&logo=huggingface&logoColor=white)
![GitHub](https://img.shields.io/badge/GitHub-181717?style=for-the-badge&logo=github&logoColor=white)
![Git](https://img.shields.io/badge/Git-F05032?style=for-the-badge&logo=git&logoColor=white)

</div>


## I. í”„ë¡œì íŠ¸ ê°œìš”
### 1. ëª©ì 
 - ë‹¤ì–‘í•œ í˜•íƒœì˜ ë°ì´í„°ì™€ LLM ì—°ë™í•˜ì—¬ ì›¹UIì‹œê°í™”
 - í…Œì´ë¸”ë°ì´í„°,í˜¼í•©í˜•ë°ì´í„°(ê¸€,ìˆ«ì,í‘œ)ë¥¼ ê°ê° ì •í˜•DBì™€ ë²¡í„°DBë¡œ êµ¬ì¶•í•˜ì—¬ LLMì™€ ì—°ë™
 - ì •í˜•DB : í…Œì´ë¸”ë°ì´í„°
 - ë²¡í„°DB : í˜¼í•©í˜•ë°ì´í„°(ê¸€,ìˆ«ì,í‘œ) / í…Œì´ë¸”ë°ì´í„° / íŠ¹ë¬¸êµ¬ì¡°í˜•ë¬¸ì„œ
 ```
ì´ì¤‘ ë„ë©”ì¸ ì‹œìŠ¤í…œ: FM(ì¶•êµ¬) + HR(íšŒì‚¬ ê·œì •/ì¸ì‚¬)
ìë™ ì§ˆë¬¸ ë¶„ë¥˜ ë° ëª¨ë“ˆ ë¼ìš°íŒ…
Streamlit ê¸°ë°˜ UI / LangChain ê¸°ë°˜ Agent
LLM: GPT-4o-mini, ì„ë² ë”©: KURE-v1, Reranker: bge-reranker-v2-m3-ko
ë°ì´í„°: FAISS Vector DB + SQLite
```
## II. ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜ 
### ì‘ë™ íë¦„ ìš”ì•½
```
FM/HR ë¶„ë¥˜ê¸° : ì‚¬ìš©ì ì…ë ¥ â†’ classify() â†’ ë„ë©”ì¸ íŒë‹¨
â”œâ”€â”€ FM : "soccer" â†’ get_answer_from_question() â†’ SQL + LLM + ì´ë¯¸ì§€
â””â”€â”€ HR : "company" â†’ process_query() â†’ LangChain Agent â†’ hybrid search â†’ GPT
```
### 1. ì „ì²´ í”„ë¡œì„¸ìŠ¤ íë¦„ë„ (Main Flowchart)
![image](https://github.com/user-attachments/assets/56d13dfc-d8a1-4b34-83a7-3c72e48df6ba)

### 2. ì„¸ë¶€ í”„ë¡œì„¸ìŠ¤ íë¦„ë„ - ì§ˆë¬¸ ìë™ ë¶„ë¥˜ (Sub Flowchart - Automated Question Classification)
<img src="https://github.com/user-attachments/assets/940c4d10-adc9-4726-92d0-d81fe09f1106" width="100%"></td>


## III. ì£¼ìš” ê¸°ëŠ¥

### 1. ì§ˆë¬¸ ìë™ ë¶„ë¥˜ (Question Routing)
- **ëª¨ë¸**: `sentence-transformers/all-MiniLM-L6-v2`
- **ê¸°ìˆ **: FAISS ê¸°ë°˜ ë²¡í„° ìœ ì‚¬ë„ ê²€ìƒ‰
- **ë¶„ë¥˜**: 'soccer' (ì¶•êµ¬ ê´€ë ¨) / 'company' (íšŒì‚¬ ê´€ë ¨)

### 2. FM ëª¨ë“ˆ (ì¶•êµ¬ ì„ ìˆ˜ ì •ë³´)
- **ìì—°ì–´ â†’ SQL ë³€í™˜**: GPT-4o-mini ëª¨ë¸ ì‚¬ìš©
- **ë°ì´í„°ë² ì´ìŠ¤**: SQLite (players_position.db)
- **ì´ë¯¸ì§€ ê²€ìƒ‰**: Bing ì´ë¯¸ì§€ í¬ë¡¤ë§ (Selenium)
- **ì‘ë‹µ í˜•ì‹**: JSON ë°°ì—´ë¡œ êµ¬ì¡°í™”ëœ ì„ ìˆ˜ ì •ë³´

### 3. HR ëª¨ë“ˆ (íšŒì‚¬ ì •ë³´)
- **RAG ì‹œìŠ¤í…œ**: FAISS ë²¡í„° ë°ì´í„°ë² ì´ìŠ¤ í™œìš©
- **ë‹¤ì¤‘ ê²€ìƒ‰ ë„êµ¬**: 
  - í†µí•© ê²€ìƒ‰ (ë‚´ë¶€+ì™¸ë¶€)
  - íšŒì‚¬ ì „ìš© ê²€ìƒ‰
  - ë„¤ì´ë²„ ë‰´ìŠ¤/ì›¹ ê²€ìƒ‰
  - í‡´ì§ê¸ˆ ê³„ì‚°ê¸°
- **LLM ì§€ì›**: OpenAI GPT ë° HyperCLOVAX

## IV. ë””ë ‰í† ë¦¬ êµ¬ì¡°

```
AJR/
â”œâ”€â”€ app.py                          # ë©”ì¸ Streamlit ì• í”Œë¦¬ì¼€ì´ì…˜
â”œâ”€â”€ question_Routing.py             # ì§ˆë¬¸ ë¶„ë¥˜ ì‹œìŠ¤í…œ
â”œâ”€â”€ requirements.txt                # Python íŒ¨í‚¤ì§€ ì˜ì¡´ì„±
â”‚  
â”œâ”€â”€ FM/                           # Football Manager ëª¨ë“ˆ
â”‚   â”œâ”€â”€ FM_GetData_LLM.py         # ë©”ì¸ ì¶•êµ¬ ì •ë³´ ì²˜ë¦¬
â”‚   â”œâ”€â”€ tools/
â”‚   â”‚   â”œâ”€â”€ create_prompt.py      # SQL/ìì—°ì–´ í”„ë¡¬í”„íŠ¸ ìƒì„±
â”‚   â”‚   â”œâ”€â”€ SQL_create.py         # SQL í”„ë¡¬í”„íŠ¸ í…œí”Œë¦¿ ë°˜í™˜
â”‚   â”‚   â”œâ”€â”€ SQL_execute.py        # SQL í”„ë¡¬í”„íŠ¸ í…œí”Œë¦¿ ë°˜í™˜
â”‚   â”‚   â””â”€â”€ image_craper.py       # Bing "BING"ì—ì„œ ì´ë¯¸ì§€ í¬ë¡¤ë§
â”‚   â””â”€â”€ data/
â”‚       â””â”€â”€ players_position.db   # ì¶•êµ¬ ì„ ìˆ˜ ë°ì´í„°ë² ì´ìŠ¤ ( ì •í˜•DB )
â”‚
â””â”€â”€ HR/                           # Human Resources ëª¨ë“ˆ
    â”œâ”€â”€ agents/
    â”‚   â””â”€â”€ agent_executor.py     # Langchain Agent ì‹¤í–‰ê¸°
    â”œâ”€â”€ tools/
    â”‚   â””â”€â”€ rag_tool.py          # RAG ë„êµ¬ ëª¨ìŒ  
    â””â”€â”€ data/                    
        â”œâ”€â”€ faiss_win/           # ì‚¬ë‚´ ê·œì • FAISS ì¸ë±ìŠ¤ ( ë²¡í„°DB )
        â””â”€â”€ faiss_org_hr/        # ì¸ì‚¬ êµ¬ì¡° FAISS ì¸ë±ìŠ¤ ( ë²¡í„°DB )
```

```
- **LangChain**: 4ê°œ íŒ¨í‚¤ì§€ (core, community, openai, experimental)
- **OpenAI GPT-4o-mini**: ë©”ì¸ ì–¸ì–´ ëª¨ë¸
- **HyperCLOVAX**: ëŒ€ì²´ ì–¸ì–´ ëª¨ë¸ ì§€ì›
- **Sentence Transformers**: ì§ˆë¬¸ ë¶„ë¥˜ìš© ì„ë² ë”©
- **FAISS**: ë²¡í„° ìœ ì‚¬ë„ ê²€ìƒ‰
- **Transformers**: í—ˆê¹…í˜ì´ìŠ¤ ëª¨ë¸ ì§€ì›

### ì›¹ & ë°ì´í„°ë² ì´ìŠ¤
- **Streamlit**: ì›¹ ì¸í„°í˜ì´ìŠ¤
- **SQLite**: ì¶•êµ¬ ì„ ìˆ˜ ë°ì´í„°ë² ì´ìŠ¤
- **SQLAlchemy**: ë°ì´í„°ë² ì´ìŠ¤ ORM

### ì›¹ í¬ë¡¤ë§ & ì´ë¯¸ì§€
- **Selenium**: ì›¹ ë¸Œë¼ìš°ì € ìë™í™”
- **BeautifulSoup4**: HTML íŒŒì‹±
- **Pillow**: ì´ë¯¸ì§€ ì²˜ë¦¬
- **Requests**: HTTP ìš”ì²­

### ë°ì´í„° ë¶„ì„
- **Pandas**: ë°ì´í„° í”„ë ˆì„ ì¡°ì‘
- **NumPy**: ìˆ˜ì¹˜ ì—°ì‚°
- **Scikit-learn**: ë¨¸ì‹ ëŸ¬ë‹ ë„êµ¬
```

## V. ì„¤ì¹˜ ë° ì‹¤í–‰

### 1. í™˜ê²½ ì„¤ì •
```
```bash
# ì €ì¥ì†Œ í´ë¡ 
git clone [repository-url](https://github.com/SKNETWORKS-FAMILY-AICAMP/SKN12-3RD-4TEAM.git

# ê°€ìƒí™˜ê²½ ìƒì„± (ê¶Œì¥)
python -m venv venv
source venv/bin/activate  # Linux/Mac
# ë˜ëŠ”
venv\Scripts\activate     # Windows

# íŒ¨í‚¤ì§€ ì„¤ì¹˜
pip install -r requirements.txt
```

### 2. í™˜ê²½ë³€ìˆ˜ ì„¤ì •
```
`.env` íŒŒì¼ ìƒì„±:
```env
# OpenAI API ì„¤ì •
OPENAI_API_KEY=your_openai_api_key_here
# HuggingFace í† í°
HUGGINGFACE_TOKEN=your_huggingface_token_here
# ë„¤ì´ë²„ ê²€ìƒ‰ API
NAVER_CLIENT_ID=your_naver_id_here
NAVER_CLIENT_SECRET=your_naver_token_here
# ëª¨ë¸ ì„¤ì •
LLM_MODEL=gpt-4o-mini
# RERANKER_MODEL=BAAI/bge-reranker-v2-m3 # ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” ëª¨ë¸ì€ ì£¼ì„ì²˜ë¦¬
LLM_MODEL=gpt-4o-mini # ì‚¬ìš©í•˜ëŠ” ëª¨ë¸ì„¤ì •
# ë²¡í„° ë°ì´í„°ë² ì´ìŠ¤ ì„¤ì •
VECTOR_DB_PATH=HR/data/faiss_win
VECTOR_DB_PATH_HR=HR/data/faiss_org_hr
```
### 3. ì• í”Œë¦¬ì¼€ì´ì…˜ ì‹¤í–‰

```bash
streamlit run app.py
```

## :bulb: ì‚¬ìš© ë°©ë²•

### ì¶•êµ¬ ê´€ë ¨ ì§ˆë¬¸ ì˜ˆì‹œ
- "ë¦¬ì˜¤ë„¬ ë©”ì‹œì— ëŒ€í•´ ì•Œë ¤ì¤˜"
- "í˜¸ë‚ ë‘ì˜ ì»¤ë¦¬ì–´ëŠ” ì–´ë•Œ?"
- "ì†í¥ë¯¼ì€ ì–´ë–¤ íŒ€ì—ì„œ ë›°ê³  ìˆì–´?"
- "10000000 ì˜ˆì‚° ì•ˆì—ì„œ ì˜ì…ê°€ëŠ¥í•œ ìˆ˜ë¹„ìˆ˜"

### íšŒì‚¬ ê´€ë ¨ ì§ˆë¬¸ ì˜ˆì‹œ
- "ì—°ì°¨ëŠ” ì–´ë–»ê²Œ ì¨ìš”?"
- "ë³µì§€ í¬ì¸íŠ¸ëŠ” ì–´ë””ì„œ í™•ì¸í•´?"
- "í‡´ì‚¬í•˜ë ¤ë©´ ë­ë¶€í„° í•´ì•¼ í•´?"
- "ì¬íƒê·¼ë¬´ ì‹ ì²­ì€ ì–´ë””ì„œ í•©ë‹ˆê¹Œ?"

## :mag: í•µì‹¬ êµ¬ì„± ìš”ì†Œ

### 1. ì§ˆë¬¸ ë¼ìš°íŒ… ì‹œìŠ¤í…œ (`question_Routing.py`)
- 60ê°œì˜ ì˜ˆì‹œ ë¬¸ì¥ìœ¼ë¡œ í•™ìŠµëœ ë¶„ë¥˜ê¸°
- FAISS ì¸ë±ìŠ¤ë¥¼ í†µí•œ ë¹ ë¥¸ ìœ ì‚¬ë„ ê²€ìƒ‰
- ì¶•êµ¬/íšŒì‚¬ ë„ë©”ì¸ ìë™ ë¶„ë¥˜

### 2. FM ëª¨ë“ˆ ì²˜ë¦¬ íë¦„
```
ì‚¬ìš©ì ì§ˆë¬¸ â†’ SQL ìƒì„± â†’ ë°ì´í„°ë² ì´ìŠ¤ ì¿¼ë¦¬ â†’ ìì—°ì–´ ì‘ë‹µ ìƒì„± â†’ ì´ë¯¸ì§€ ê²€ìƒ‰
```

### 3. HR ëª¨ë“ˆ ë„êµ¬ ìš°ì„ ìˆœìœ„
1. `hybrid_search`: í†µí•© ê²€ìƒ‰ (ë‚´ë¶€+ì™¸ë¶€)
2. `search_company_info`: íšŒì‚¬ ì „ìš© ê²€ìƒ‰
3. `calculate_retirement_pay`: í‡´ì§ê¸ˆ ê³„ì‚°
4. `search_naver_news`: ë„¤ì´ë²„ ë‰´ìŠ¤
5. `search_documents`: ê¸°ì¡´ ë¬¸ì„œ ê²€ìƒ‰
6. `search_naver_web`: ë„¤ì´ë²„ ì›¹ ê²€ìƒ‰

## :dart: ëª¨ë¸ ë° API ì •ë³´

### ì£¼ìš” ëª¨ë¸
- **GPT-4o-mini**: ë©”ì¸ ì–¸ì–´ ëª¨ë¸ (OpenAI)
- **all-MiniLM-L6-v2**: ë¬¸ì¥ ì„ë² ë”© (Sentence Transformers)
- **HyperCLOVAX**: ëŒ€ì²´ ì–¸ì–´ ëª¨ë¸ (ë„¤ì´ë²„)

### ë°ì´í„°ë² ì´ìŠ¤
- **ì¶•êµ¬ ì„ ìˆ˜ DB**: 788KB SQLite íŒŒì¼
- **HR ë²¡í„° DB**: FAISS ì¸ë±ìŠ¤ (ì‚¬ë‚´ ê·œì •/ì¸ì‚¬ êµ¬ì¡°)

## :wrench: ê°œë°œ ë„êµ¬

### ë””ë²„ê¹… & í…ŒìŠ¤íŠ¸
- Verbose ëª¨ë“œë¡œ LangChain ì—ì´ì „íŠ¸ ì‹¤í–‰ ë¡œê·¸ í™•ì¸

### í™•ì¥ì„±
- ìƒˆë¡œìš´ LLM ëª¨ë¸ ì‰½ê²Œ ì¶”ê°€ ê°€ëŠ¥
- ë„êµ¬ ìš°ì„ ìˆœìœ„ ì‹œìŠ¤í…œìœ¼ë¡œ ê¸°ëŠ¥ í™•ì¥ ìš©ì´
- ëª¨ë“ˆì‹ êµ¬ì¡°ë¡œ ë…ë¦½ì  ê°œë°œ ê°€ëŠ¥

## :chart_with_upwards_trend: ì„±ëŠ¥ ìµœì í™”

- **ìºì‹±**: Streamlit ì„¸ì…˜ ìƒíƒœ í™œìš©
- **ë³‘ë ¬ ì²˜ë¦¬**: FAISS ë²¡í„° ê²€ìƒ‰ ìµœì í™”
- **ë©”ëª¨ë¦¬ ê´€ë¦¬**: PyTorch í´ë˜ìŠ¤ ê°ì‹œ ì œì™¸
- **ì´ë¯¸ì§€ ìµœì í™”**: PIL ì´ë¯¸ì§€ ì²˜ë¦¬ ë° ì••ì¶•

## :rotating_light: ì£¼ì˜ì‚¬í•­

1. **API í‚¤ í•„ìˆ˜**: OpenAI API í‚¤ ì—†ì´ëŠ” LLM ê¸°ëŠ¥ ì‚¬ìš© ë¶ˆê°€
2. **í¬ë¡¬ ë“œë¼ì´ë²„**: ì´ë¯¸ì§€ í¬ë¡¤ë§ì„ ìœ„í•œ ìë™ ì„¤ì¹˜
3. **ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰**: ëŒ€ìš©ëŸ‰ ëª¨ë¸ ë¡œë“œ ì‹œ ì¶©ë¶„í•œ RAM í•„ìš”
4. **ë„¤íŠ¸ì›Œí¬ ì˜ì¡´ì„±**: ì‹¤ì‹œê°„ ì´ë¯¸ì§€/ë‰´ìŠ¤ ê²€ìƒ‰ ê¸°ëŠ¥

---

**ê°œë°œì**: Ballzzi Team  
**ìµœì¢… ì—…ë°ì´íŠ¸**: 2025ë…„ 06ì›” 04ì¼

```
